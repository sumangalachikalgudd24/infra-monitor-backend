{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jaggu\\\\Desktop\\\\AI Hackathon\\\\frontend\\\\src\\\\components\\\\ReportForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { FaCamera, FaPaperPlane, FaMapMarkerAlt, FaMicrophone, FaStop } from 'react-icons/fa';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ReportForm = () => {\n  _s();\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    location: '',\n    category: 'Other'\n  });\n  const [image, setImage] = useState(null);\n  const [preview, setPreview] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [message, setMessage] = useState({\n    text: '',\n    type: ''\n  });\n  const [isListening, setIsListening] = useState(false);\n  const [speechRecognition, setSpeechRecognition] = useState(null);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (SpeechRecognition) {\n        const recognition = new SpeechRecognition();\n        recognition.continuous = true;\n        recognition.interimResults = true;\n        recognition.lang = 'en-US';\n        recognition.onresult = event => {\n          const transcript = Array.from(event.results).map(result => result[0]).map(result => result.transcript).join('');\n          setFormData(prev => ({\n            ...prev,\n            description: transcript\n          }));\n        };\n        recognition.onerror = event => {\n          console.error('Speech recognition error', event.error);\n          setIsListening(false);\n          setMessage({\n            text: 'Error: Could not process voice input',\n            type: 'error'\n          });\n        };\n        setSpeechRecognition(recognition);\n      }\n    }\n    return () => {\n      if (speechRecognition) {\n        speechRecognition.stop();\n      }\n    };\n  }, []);\n  const toggleListening = () => {\n    if (isListening) {\n      speechRecognition.stop();\n      setIsListening(false);\n    } else {\n      try {\n        setFormData(prev => ({\n          ...prev,\n          description: prev.description ? prev.description + ' ' : ''\n        }));\n        speechRecognition.start();\n        setIsListening(true);\n      } catch (err) {\n        console.error('Error starting speech recognition:', err);\n        setMessage({\n          text: 'Error: Could not access microphone. Please check permissions.',\n          type: 'error'\n        });\n      }\n    }\n  };\n  const categories = ['Electrical', 'Plumbing', 'Structural', 'Furniture', 'HVAC', 'Other'];\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setImage(file);\n      setPreview(URL.createObjectURL(file));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log('Form submission started');\n    setIsSubmitting(true);\n    setMessage({\n      text: '',\n      type: ''\n    });\n\n    // Get token from localStorage\n    const token = localStorage.getItem('token');\n    console.log('Auth token:', token ? 'Token exists' : 'No token found');\n    if (!token) {\n      setMessage({\n        text: 'You need to be logged in to submit a report. Redirecting to login...',\n        type: 'error'\n      });\n      setTimeout(() => {\n        window.location.href = '/login';\n      }, 2000);\n      return;\n    }\n\n    // Basic validation\n    if (!formData.title.trim()) {\n      setMessage({\n        text: 'Title is required',\n        type: 'error'\n      });\n      setIsSubmitting(false);\n      return;\n    }\n\n    // Create FormData object\n    const formDataToSend = new FormData();\n    formDataToSend.append('title', formData.title);\n    formDataToSend.append('description', formData.description || '');\n    formDataToSend.append('location', formData.location || 'Unknown');\n    formDataToSend.append('category', formData.category || 'Other');\n    formDataToSend.append('priority', 'medium');\n    if (image) {\n      console.log('Image selected:', image.name, 'Type:', image.type, 'Size:', image.size);\n      formDataToSend.append('image', image);\n    } else {\n      console.log('No image selected');\n    }\n    try {\n      // Token already checked at the start\n\n      const response = await axios.post('http://localhost:5000/api/reports', formDataToSend, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setMessage({\n        text: 'Report submitted successfully!',\n        type: 'success'\n      });\n\n      // Reset form\n      setFormData({\n        title: '',\n        description: '',\n        location: '',\n        category: 'Other'\n      });\n      setImage(null);\n      setPreview('');\n\n      // Redirect after 2 seconds\n      setTimeout(() => {\n        window.location.href = '/reports';\n      }, 2000);\n    } catch (error) {\n      var _error$response, _error$response2, _error$response3, _error$response3$data;\n      console.error('Error submitting report:', {\n        message: error.message,\n        response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n        status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status\n      });\n      let errorMessage = 'Failed to submit report. Please try again.';\n      if ((_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && _error$response3$data.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      setMessage({\n        text: errorMessage,\n        type: 'error'\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-6 text-gray-800\",\n      children: \"Report Infrastructure Issue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `mb-4 p-3 rounded ${message.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n      children: message.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"title\",\n          name: \"title\",\n          value: formData.title,\n          onChange: handleChange,\n          className: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"description\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: toggleListening,\n            className: `flex items-center text-sm ${isListening ? 'text-red-600' : 'text-blue-600 hover:text-blue-800'}`,\n            children: isListening ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(FaStop, {\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this), \" Stop Listening\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(FaMicrophone, {\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this), \" Voice Input\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-1 relative rounded-md shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"description\",\n            name: \"description\",\n            rows: \"3\",\n            value: formData.description,\n            onChange: handleChange,\n            className: \"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-10\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), isListening && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-pulse flex space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-1 h-1 bg-red-500 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-1 h-1 bg-red-500 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-1 h-1 bg-red-500 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-xs text-gray-500\",\n          children: isListening ? 'Listening... Speak now.' : 'Click the microphone to use voice input'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"location\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(FaMapMarkerAlt, {\n              className: \"inline mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), \" Location\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"location\",\n            name: \"location\",\n            value: formData.location,\n            onChange: handleChange,\n            className: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\",\n            placeholder: \"Building, floor, room number\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"category\",\n            className: \"block text-sm font-medium text-gray-700\",\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"category\",\n            name: \"category\",\n            value: formData.category,\n            onChange: handleChange,\n            className: \"mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm\",\n            children: categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: category,\n              children: category\n            }, category, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Photo (Optional but recommended)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1 text-center\",\n            children: preview ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: preview,\n                alt: \"Preview\",\n                className: \"mx-auto h-32 w-auto object-cover rounded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setImage(null);\n                  setPreview('');\n                },\n                className: \"mt-2 text-sm text-red-600 hover:text-red-800\",\n                children: \"Remove photo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center\",\n              children: [/*#__PURE__*/_jsxDEV(FaCamera, {\n                className: \"mx-auto h-12 w-12 text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex text-sm text-gray-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"file-upload\",\n                  className: \"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Upload a file\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: \"file-upload\",\n                    name: \"file-upload\",\n                    type: \"file\",\n                    className: \"sr-only\",\n                    accept: \"image/*\",\n                    onChange: handleImageChange,\n                    capture: \"environment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"pl-1\",\n                  children: \"or drag and drop\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-500\",\n                children: \"PNG, JPG, GIF up to 10MB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isSubmitting,\n          className: `w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white \n              ${isSubmitting ? 'bg-blue-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'}\n              focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,\n          onClick: e => {\n            console.log('Button clicked');\n            // The form's onSubmit will handle the submission\n          },\n          children: isSubmitting ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                className: \"opacity-25\",\n                cx: \"12\",\n                cy: \"12\",\n                r: \"10\",\n                stroke: \"currentColor\",\n                strokeWidth: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                className: \"opacity-75\",\n                fill: \"currentColor\",\n                d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this), \"Submitting...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(FaPaperPlane, {\n              className: \"mr-2 h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), \"Submit Report\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n};\n_s(ReportForm, \"cQEVtnUMBbZ1AYW7s8E03mxFkqI=\");\n_c = ReportForm;\nexport default ReportForm;\nvar _c;\n$RefreshReg$(_c, \"ReportForm\");","map":{"version":3,"names":["React","useState","useEffect","axios","FaCamera","FaPaperPlane","FaMapMarkerAlt","FaMicrophone","FaStop","jsxDEV","_jsxDEV","Fragment","_Fragment","ReportForm","_s","formData","setFormData","title","description","location","category","image","setImage","preview","setPreview","isSubmitting","setIsSubmitting","message","setMessage","text","type","isListening","setIsListening","speechRecognition","setSpeechRecognition","window","SpeechRecognition","webkitSpeechRecognition","recognition","continuous","interimResults","lang","onresult","event","transcript","Array","from","results","map","result","join","prev","onerror","console","error","stop","toggleListening","start","err","categories","handleChange","e","name","value","target","handleImageChange","file","files","URL","createObjectURL","handleSubmit","preventDefault","log","token","localStorage","getItem","setTimeout","href","trim","formDataToSend","FormData","append","size","response","post","headers","_error$response","_error$response2","_error$response3","_error$response3$data","data","status","errorMessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","id","onChange","required","onClick","rows","placeholder","src","alt","accept","capture","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","_c","$RefreshReg$"],"sources":["C:/Users/jaggu/Desktop/AI Hackathon/frontend/src/components/ReportForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { FaCamera, FaPaperPlane, FaMapMarkerAlt, FaMicrophone, FaStop } from 'react-icons/fa';\r\n\r\nconst ReportForm = () => {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    location: '',\r\n    category: 'Other',\r\n  });\r\n  const [image, setImage] = useState(null);\r\n  const [preview, setPreview] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [message, setMessage] = useState({ text: '', type: '' });\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [speechRecognition, setSpeechRecognition] = useState(null);\r\n\r\n  // Initialize speech recognition\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n      if (SpeechRecognition) {\r\n        const recognition = new SpeechRecognition();\r\n        recognition.continuous = true;\r\n        recognition.interimResults = true;\r\n        recognition.lang = 'en-US';\r\n\r\n        recognition.onresult = (event) => {\r\n          const transcript = Array.from(event.results)\r\n            .map(result => result[0])\r\n            .map(result => result.transcript)\r\n            .join('');\r\n\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            description: transcript\r\n          }));\r\n        };\r\n\r\n        recognition.onerror = (event) => {\r\n          console.error('Speech recognition error', event.error);\r\n          setIsListening(false);\r\n          setMessage({\r\n            text: 'Error: Could not process voice input',\r\n            type: 'error'\r\n          });\r\n        };\r\n\r\n        setSpeechRecognition(recognition);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (speechRecognition) {\r\n        speechRecognition.stop();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const toggleListening = () => {\r\n    if (isListening) {\r\n      speechRecognition.stop();\r\n      setIsListening(false);\r\n    } else {\r\n      try {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          description: prev.description ? prev.description + ' ' : ''\r\n        }));\r\n        speechRecognition.start();\r\n        setIsListening(true);\r\n      } catch (err) {\r\n        console.error('Error starting speech recognition:', err);\r\n        setMessage({\r\n          text: 'Error: Could not access microphone. Please check permissions.',\r\n          type: 'error'\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const categories = [\r\n    'Electrical',\r\n    'Plumbing',\r\n    'Structural',\r\n    'Furniture',\r\n    'HVAC',\r\n    'Other'\r\n  ];\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImage(file);\r\n      setPreview(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log('Form submission started');\r\n    setIsSubmitting(true);\r\n    setMessage({ text: '', type: '' });\r\n\r\n    // Get token from localStorage\r\n    const token = localStorage.getItem('token');\r\n    console.log('Auth token:', token ? 'Token exists' : 'No token found');\r\n\r\n    if (!token) {\r\n      setMessage({ \r\n        text: 'You need to be logged in to submit a report. Redirecting to login...', \r\n        type: 'error' \r\n      });\r\n      setTimeout(() => {\r\n        window.location.href = '/login';\r\n      }, 2000);\r\n      return;\r\n    }\r\n\r\n    // Basic validation\r\n    if (!formData.title.trim()) {\r\n      setMessage({ text: 'Title is required', type: 'error' });\r\n      setIsSubmitting(false);\r\n      return;\r\n    }\r\n\r\n    // Create FormData object\r\n    const formDataToSend = new FormData();\r\n    formDataToSend.append('title', formData.title);\r\n    formDataToSend.append('description', formData.description || '');\r\n    formDataToSend.append('location', formData.location || 'Unknown');\r\n    formDataToSend.append('category', formData.category || 'Other');\r\n    formDataToSend.append('priority', 'medium');\r\n    \r\n    if (image) {\r\n      console.log('Image selected:', image.name, 'Type:', image.type, 'Size:', image.size);\r\n      formDataToSend.append('image', image);\r\n    } else {\r\n      console.log('No image selected');\r\n    }\r\n\r\n    try {\r\n      // Token already checked at the start\r\n\r\n      const response = await axios.post('http://localhost:5000/api/reports', formDataToSend, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n      });\r\n\r\n      setMessage({\r\n        text: 'Report submitted successfully!',\r\n        type: 'success'\r\n      });\r\n      \r\n      // Reset form\r\n      setFormData({\r\n        title: '',\r\n        description: '',\r\n        location: '',\r\n        category: 'Other',\r\n      });\r\n      setImage(null);\r\n      setPreview('');\r\n      \r\n      // Redirect after 2 seconds\r\n      setTimeout(() => {\r\n        window.location.href = '/reports';\r\n      }, 2000);\r\n      \r\n    } catch (error) {\r\n      console.error('Error submitting report:', {\r\n        message: error.message,\r\n        response: error.response?.data,\r\n        status: error.response?.status\r\n      });\r\n      \r\n      let errorMessage = 'Failed to submit report. Please try again.';\r\n      if (error.response?.data?.message) {\r\n        errorMessage = error.response.data.message;\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n      \r\n      setMessage({\r\n        text: errorMessage,\r\n        type: 'error'\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-md\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-gray-800\">Report Infrastructure Issue</h2>\r\n      \r\n      {message.text && (\r\n        <div className={`mb-4 p-3 rounded ${message.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700\">Title</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n            className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <div className=\"flex justify-between items-center\">\r\n            <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700\">\r\n              Description\r\n            </label>\r\n            <button\r\n              type=\"button\"\r\n              onClick={toggleListening}\r\n              className={`flex items-center text-sm ${\r\n                isListening ? 'text-red-600' : 'text-blue-600 hover:text-blue-800'\r\n              }`}\r\n            >\r\n              {isListening ? (\r\n                <>\r\n                  <FaStop className=\"mr-1\" /> Stop Listening\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <FaMicrophone className=\"mr-1\" /> Voice Input\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n          <div className=\"mt-1 relative rounded-md shadow-sm\">\r\n            <textarea\r\n              id=\"description\"\r\n              name=\"description\"\r\n              rows=\"3\"\r\n              value={formData.description}\r\n              onChange={handleChange}\r\n              className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-10\"\r\n              required\r\n            ></textarea>\r\n            {isListening && (\r\n              <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n                <div className=\"animate-pulse flex space-x-1\">\r\n                  <div className=\"w-1 h-1 bg-red-500 rounded-full\"></div>\r\n                  <div className=\"w-1 h-1 bg-red-500 rounded-full\"></div>\r\n                  <div className=\"w-1 h-1 bg-red-500 rounded-full\"></div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <p className=\"mt-1 text-xs text-gray-500\">\r\n            {isListening ? 'Listening... Speak now.' : 'Click the microphone to use voice input'}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label htmlFor=\"location\" className=\"block text-sm font-medium text-gray-700\">\r\n              <FaMapMarkerAlt className=\"inline mr-1\" /> Location\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"location\"\r\n              name=\"location\"\r\n              value={formData.location}\r\n              onChange={handleChange}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n              placeholder=\"Building, floor, room number\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700\">Category</label>\r\n            <select\r\n              id=\"category\"\r\n              name=\"category\"\r\n              value={formData.category}\r\n              onChange={handleChange}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm\"\r\n            >\r\n              {categories.map((category) => (\r\n                <option key={category} value={category}>\r\n                  {category}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700\">Photo (Optional but recommended)</label>\r\n          <div className=\"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\">\r\n            <div className=\"space-y-1 text-center\">\r\n              {preview ? (\r\n                <div className=\"mt-2\">\r\n                  <img src={preview} alt=\"Preview\" className=\"mx-auto h-32 w-auto object-cover rounded\" />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setImage(null);\r\n                      setPreview('');\r\n                    }}\r\n                    className=\"mt-2 text-sm text-red-600 hover:text-red-800\"\r\n                  >\r\n                    Remove photo\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-col items-center\">\r\n                  <FaCamera className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                  <div className=\"flex text-sm text-gray-600\">\r\n                    <label\r\n                      htmlFor=\"file-upload\"\r\n                      className=\"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none\"\r\n                    >\r\n                      <span>Upload a file</span>\r\n                      <input\r\n                        id=\"file-upload\"\r\n                        name=\"file-upload\"\r\n                        type=\"file\"\r\n                        className=\"sr-only\"\r\n                        accept=\"image/*\"\r\n                        onChange={handleImageChange}\r\n                        capture=\"environment\"\r\n                      />\r\n                    </label>\r\n                    <p className=\"pl-1\">or drag and drop</p>\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-500\">PNG, JPG, GIF up to 10MB</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-4\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            className={`w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white \r\n              ${isSubmitting \r\n                ? 'bg-blue-400 cursor-not-allowed' \r\n                : 'bg-blue-600 hover:bg-blue-700'}\r\n              focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`}\r\n            onClick={(e) => {\r\n              console.log('Button clicked');\r\n              // The form's onSubmit will handle the submission\r\n            }}\r\n          >\r\n            {isSubmitting ? (\r\n              <span className=\"flex items-center\">\r\n                <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n                Submitting...\r\n              </span>\r\n            ) : (\r\n              <span className=\"flex items-center\">\r\n                <FaPaperPlane className=\"mr-2 h-4 w-4\" />\r\n                Submit Report\r\n              </span>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}